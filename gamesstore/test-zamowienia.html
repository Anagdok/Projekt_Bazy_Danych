<!DOCTYPE html>
<html lang="pl">
<head><meta charset="UTF-8" /><title>Test API - Zamówienia (CRUD)</title></head>
<body>
<h1>Test API - Zamówienia (CRUD)</h1>
<input id="id" placeholder="ID (do edycji/usuwania)"/><br/>
<input id="klient_id" placeholder="ID klienta"/><input id="data" placeholder="Data zamówienia (YYYY-MM-DD HH:MM:SS)"/><br/>
<input id="kwota" placeholder="Kwota całkowita"/><input id="status" placeholder="Status"/><br/>
<button onclick="dodaj()">Dodaj</button>
<button onclick="pobierz()">Pobierz wszystkie</button>
<button onclick="edytuj()">Edytuj</button>
<button onclick="usun()">Usuń</button>
<pre id="wynik"></pre>
<script>
const API = "zamowienia/";
function pokaz(d) { document.getElementById("wynik").textContent = JSON.stringify(d, null, 2); }
function dodaj() {
fetch(API + "create.php", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        klient_id: parseInt(klient_id.value),
        data_zamowienia: data.value,
        kwota_calkowita: parseFloat(kwota.value),
        status: status.value
    })
}).then(res => res.json()).then(pokaz);
}
function pobierz() {
fetch(API + "read.php").then(res => res.json()).then(pokaz);
}
function edytuj() {
fetch(API + "update.php", {
    method: "PUT",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
        zamowienie_id: parseInt(id.value),
        klient_id: parseInt(klient_id.value),
        data_zamowienia: data.value,
        kwota_calkowita: parseFloat(kwota.value),
        status: status.value
    })
}).then(res => res.json()).then(pokaz);
}
function usun() {
fetch(API + "delete.php", {
    method: "DELETE",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ zamowienie_id: parseInt(id.value) })
}).then(res => res.json()).then(pokaz);
}
</script>
</body>
</html>
